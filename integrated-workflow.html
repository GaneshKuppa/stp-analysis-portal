<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5. Integrated STP Workflow | STP Analysis in R</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        /* Same CSS as previous files - condensed for brevity */
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #7e3af2;
            --accent: #0ea5e9;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --dark-800: #0f172a;
            --dark-900: #0a0f1d;
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-300: #cbd5e1;
            --gray-700: #334155;
            --gray-800: #1e293b;
            --code-bg: #1e293b;
            --code-text: #e2e8f0;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--gray-800);
            background: linear-gradient(135deg, #f0f9ff 0%, #fefefe 100%);
            background-attachment: fixed;
        }
        
        .container {
            display: flex;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .sidebar {
            width: 260px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 2rem;
        }
        
        .sidebar-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1.25rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--gray-100);
        }
        
        .toc-list {
            list-style: none;
        }
        
        .toc-item {
            margin-bottom: 0.5rem;
        }
        
        .toc-link {
            display: block;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            text-decoration: none;
            color: var(--gray-700);
            font-weight: 500;
            transition: var(--transition);
        }
        
        .toc-link:hover {
            background: var(--gray-50);
            color: var(--primary);
            padding-left: 1rem;
        }
        
        .toc-link.active {
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary);
            font-weight: 600;
            padding-left: 1rem;
        }
        
        .main-content {
            flex: 1;
            margin-left: 2rem;
        }
        
        .header {
            margin-bottom: 2rem;
        }
        
        .breadcrumb {
            display: flex;
            gap: 0.5rem;
            color: var(--gray-500);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        
        .subtitle {
            font-size: 1.25rem;
            color: var(--gray-700);
            max-width: 700px;
            margin-bottom: 2rem;
        }
        
        .section {
            background: white;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: var(--transition);
        }
        
        .section:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--gray-100);
        }
        
        .section-title span {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 8px;
            margin-right: 12px;
            font-weight: 600;
            flex-shrink: 0;
            font-size: 1.125rem;
        }
        
        .concept-card {
            background: var(--gray-50);
            border-left: 4px solid var(--primary);
            border-radius: 0 8px 8px 0;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .concept-card.warning {
            border-left-color: var(--warning);
            background: #fffbeb;
        }
        
        .concept-card.tip {
            border-left-color: var(--success);
            background: #ecfdf5;
        }
        
        .concept-card.info {
            border-left-color: var(--accent);
            background: #ecfeff;
        }
        
        .concept-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            color: var(--dark);
        }
        
        .concept-title::before {
            content: "üí°";
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .warning .concept-title::before { content: "‚ö†Ô∏è"; }
        .tip .concept-title::before { content: "‚úÖ"; }
        .info .concept-title::before { content: "‚ÑπÔ∏è"; }
        
        h3 {
            font-size: 1.375rem;
            font-weight: 600;
            margin: 1.5rem 0 1rem;
            color: var(--dark);
        }
        
        p {
            margin-bottom: 1rem;
            color: var(--gray-700);
        }
        
        .workflow-diagram {
            display: flex;
            justify-content: center;
            margin: 2.5rem 0;
            position: relative;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .workflow-step {
            background: white;
            border: 2px solid var(--primary);
            border-radius: 16px;
            padding: 1.5rem;
            width: 200px;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative;
            transition: var(--transition);
        }
        
        .workflow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px -5px rgba(0, 0, 0, 0.15);
        }
        
        .workflow-step::after {
            content: "";
            position: absolute;
            top: 50%;
            right: -30px;
            width: 60px;
            height: 2px;
            background: var(--primary);
            transform: translateY(-50%);
        }
        
        .workflow-step:last-child::after {
            display: none;
        }
        
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            font-weight: 700;
            margin-bottom: 1rem;
            font-size: 1.125rem;
        }
        
        .step-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-size: 1.125rem;
        }
        
        .step-desc {
            font-size: 0.9rem;
            color: var(--gray-600);
        }
        
        .code-container {
            margin: 1.75rem 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .code-header {
            background: var(--dark-800);
            color: white;
            padding: 0.75rem 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .code-label {
            display: flex;
            align-items: center;
        }
        
        .code-label::before {
            content: "";
            display: inline-block;
            width: 10px;
            height: 10px;
            background: #ff5f57;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .copy-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            transition: var(--transition);
        }
        
        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }
        
        .copy-btn:active {
            background: rgba(255, 255, 255, 0.35);
        }
        
        code {
            font-family: 'JetBrains Mono', monospace;
            background: var(--gray-100);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.95em;
            color: var(--dark);
        }
        
        pre {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem;
            border-radius: 0 0 12px 12px;
            margin: 0;
            overflow-x: auto;
            line-height: 1.5;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
        }
        
        .comment { color: #94a3b8; }
        .function { color: #60a5fa; }
        .string { color: #fbbf24; }
        .number { color: #10b981; }
        .keyword { color: #f87171; }
        .operator { color: #93c5fd; }
        
        .next-steps {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--gray-200);
        }
        
        .nav-btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            text-decoration: none;
            padding: 0.875rem 1.75rem;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1.05rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .nav-btn.next {
            background: var(--secondary);
        }
        
        .nav-btn.next:hover {
            background: #6d28d9;
        }
        
        @media (max-width: 900px) {
            .container {
                flex-direction: column;
                padding: 1.5rem;
            }
            
            .sidebar {
                width: 100%;
                position: static;
                margin-bottom: 2rem;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .next-steps {
                flex-direction: column;
                gap: 1rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .workflow-diagram {
                flex-direction: column;
                align-items: center;
            }
            
            .workflow-step::after {
                display: none;
            }
            
            .workflow-step {
                width: 100%;
                max-width: 350px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <h2 class="sidebar-title">Module 5: Integrated Workflow</h2>
            <ul class="toc-list">
                <li class="toc-item"><a href="#workflow-overview" class="toc-link active">Workflow Overview</a></li>
                <li class="toc-item"><a href="#end-to-end" class="toc-link">End-to-End Implementation</a></li>
                <li class="toc-item"><a href="#business-translation" class="toc-link">Business Translation</a></li>
                <li class="toc-item"><a href="exercises.html" class="toc-link">‚Üí Next: Exercises</a></li>
            </ul>
        </aside>
        
        <!-- MAIN CONTENT -->
        <main class="main-content">
            <div class="breadcrumb">
                <a href="index.html">Home</a> / <a href="positioning.html">Module 4</a> / Module 5
            </div>
            
            <header class="header">
                <h1>Integrated STP Workflow</h1>
                <p class="subtitle">Combine segmentation, targeting, and positioning into a cohesive strategic workflow. Translate statistical outputs into business decisions with real-world examples.</p>
            </header>
            
            <section class="section" id="workflow-overview">
                <h2 class="section-title"><span>1</span> The Complete STP Workflow</h2>
                
                <p>This section demonstrates how segmentation, targeting, and positioning work together in a cohesive strategic workflow. We'll implement a complete end-to-end analysis using the sun care market dataset.</p>
                
                <div class="workflow-diagram">
                    <div class="workflow-step">
                        <div class="step-number">1</div>
                        <div class="step-title">Data Preparation</div>
                        <div class="step-desc">Load, clean, standardize data</div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">2</div>
                        <div class="step-title">Segmentation</div>
                        <div class="step-desc">Identify customer groups</div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">3</div>
                        <div class="step-title">Targeting</div>
                        <div class="step-desc">Evaluate segment attractiveness</div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">4</div>
                        <div class="step-title">Positioning</div>
                        <div class="step-desc">Develop brand position</div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">5</div>
                        <div class="step-title">Strategy</div>
                        <div class="step-desc">Create positioning statement</div>
                    </div>
                </div>
                
                <div class="concept-card info">
                    <div class="concept-title">Critical Integration Point</div>
                    <p>Segmentation outputs directly inform targeting decisions, which then shape positioning strategy. The workflow is sequential but iterative ‚Äî positioning insights may reveal the need to refine segments or reconsider target selection.</p>
                </div>
            </section>
            
            <section class="section" id="end-to-end">
                <h2 class="section-title"><span>2</span> End-to-End Implementation</h2>
                
                <div class="code-container">
                    <div class="code-header">
                        <div class="code-label">stp_complete_workflow.R</div>
                        <button class="copy-btn">Copy</button>
                    </div>
                    <pre><span class="comment">##########################################</span>
<span class="comment"># COMPLETE STP ANALYSIS: SUN CARE MARKET</span>
<span class="comment">##########################################</span>

<span class="comment"># STEP 1: DATA PREPARATION</span>
seg.df <- <span class="function">read.csv</span>(<span class="string">"Data_Segmentation.csv"</span>, <span class="string">stringsAsFactors = TRUE</span>)

<span class="comment"># Recode binary factors</span>
seg.df$gender <- <span class="function">ifelse</span>(seg.df$gender == <span class="string">"Male"</span>, <span class="number">0</span>, <span class="number">1</span>)
seg.df$ownHome <- <span class="function">ifelse</span>(seg.df$ownHome == <span class="string">"ownNo"</span>, <span class="number">0</span>, <span class="number">1</span>)
seg.df$subscribe <- <span class="function">ifelse</span>(seg.df$subscribe == <span class="string">"subNo"</span>, <span class="number">0</span>, <span class="number">1</span>)

<span class="comment"># Standardize continuous variables</span>
seg.df.sc <- seg.df
seg.df.sc[, <span class="function">c</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>)] <- <span class="function">scale</span>(seg.df[, <span class="function">c</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>)])

<span class="comment"># STEP 2: SEGMENTATION (Model-Based Clustering)</span>
<span class="function">library</span>(<span class="string">mclust</span>)
seg.mc <- <span class="function">Mclust</span>(seg.df.sc)
seg.df$segment <- seg.mc$classification

<span class="comment"># Profile segments</span>
segment_profiles <- seg.df %>%
  <span class="function">group_by</span>(segment) %>%
  <span class="function">summarise</span>(
    customers = <span class="function">n</span>(),
    market_share = <span class="function">round</span>(<span class="function">n</span>() / <span class="function">nrow</span>(seg.df) * <span class="number">100</span>, <span class="number">1</span>),
    avg_age = <span class="function">round</span>(<span class="function">mean</span>(age), <span class="number">1</span>),
    avg_income = <span class="function">round</span>(<span class="function">mean</span>(income), <span class="number">0</span>),
    female_pct = <span class="function">round</span>(<span class="function">mean</span>(gender) * <span class="number">100</span>, <span class="number">1</span>),
    homeowner_pct = <span class="function">round</span>(<span class="function">mean</span>(ownHome) * <span class="number">100</span>, <span class="number">1</span>),
    subscribe_rate = <span class="function">round</span>(<span class="function">mean</span>(subscribe) * <span class="number">100</span>, <span class="number">1</span>)
  ) %>%
  <span class="function">arrange</span>(<span class="function">desc</span>(subscribe_rate))

<span class="function">print</span>(segment_profiles)

<span class="comment"># STEP 3: TARGETING DECISION</span>
<span class="comment"># Calculate segment attractiveness score</span>
<span class="comment"># Formula: (Market Size * 0.3) + (Income Potential * 0.3) + (Profitability * 0.4)</span>
segment_profiles <- segment_profiles %>%
  <span class="function">mutate</span>(
    attractiveness_score = (market_share * <span class="number">0.3</span>) + 
                           ((avg_income / <span class="number">100000</span>) * <span class="number">30</span> * <span class="number">0.3</span>) + 
                           (subscribe_rate * <span class="number">0.4</span>),
    target_priority = <span class="function">case_when</span>(
      attractiveness_score >= <span class="number">60</span> ~ <span class="string">"PRIMARY TARGET"</span>,
      attractiveness_score >= <span class="number">45</span> ~ <span class="string">"SECONDARY TARGET"</span>,
      <span class="keyword">TRUE</span> ~ <span class="string">"MONITOR ONLY"</span>
    )
  ) %>%
  <span class="function">arrange</span>(<span class="function">desc</span>(attractiveness_score))

primary_target <- segment_profiles$segment[<span class="number">1</span>]
cat(<span class="string">"\nPRIMARY TARGET SEGMENT: Segment"</span>, primary_target, <span class="string">"\n"</span>)
cat(<span class="string">"Profile:"</span>, segment_profiles$market_share[<span class="number">1</span>], <span class="string">"% of market, $"</span>, 
    segment_profiles$avg_income[<span class="number">1</span>], <span class="string">"avg income, "</span>, 
    segment_profiles$subscribe_rate[<span class="number">1</span>], <span class="string">"% subscription rate\n"</span>)

<span class="comment"># STEP 4: POSITIONING ANALYSIS</span>
<span class="comment"># (Using coffee brand data as proxy for competitive landscape)</span>
brand.ratings <- <span class="function">read.csv</span>(<span class="string">"Data_Factor_Analysis.csv"</span>, <span class="string">stringsAsFactors = TRUE</span>)
brand.sc <- brand.ratings
brand.sc[, <span class="number">1</span>:<span class="number">9</span>] <- <span class="function">scale</span>(brand.ratings[, <span class="number">1</span>:<span class="number">9</span>])

<span class="comment"># Aggregate to brand level</span>
brand.mean <- <span class="function">aggregate</span>(. ~ brand, <span class="string">data = brand.sc</span>, <span class="function">mean</span>)
<span class="function">rownames</span>(brand.mean) <- brand.mean$brand
brand.mean$brand <- <span class="keyword">NULL</span>

<span class="comment"># Factor analysis</span>
brand.fa <- <span class="function">factanal</span>(brand.mean, <span class="string">factors = 2</span>, <span class="string">rotation = "varimax"</span>, <span class="string">scores = "regression"</span>)
brand.scores <- brand.fa$scores

<span class="comment"># Identify positioning opportunity for target segment</span>
<span class="comment"># (Assume target segment values "value" and "rebuy")</span>
opportunity_vector <- <span class="function">c</span>(
  perform = <span class="number">0.2</span>, leader = <span class="number">0.1</span>, latest = <span class="number">-0.3</span>, fun = <span class="number">0.1</span>,
  serious = <span class="number">0.0</span>, bargain = <span class="number">0.9</span>, value = <span class="number">0.95</span>, trendy = <span class="number">-0.2</span>, rebuy = <span class="number">0.85</span>
)

<span class="comment"># STEP 5: POSITIONING STATEMENT</span>
positioning_statement <- <span class="function">sprintf</span>(
  <span class="string">"For Segment %d customers who value sun protection without premium pricing,\n"</span>,
  primary_target,
  <span class="string">"SunGuard is a subscription-based sun care system that delivers pharmacy-grade\n"</span>,
  <span class="string">"SPF protection at 30%% below retail through our direct-to-consumer model."</span>
)

cat(<span class="string">"\nPOSITIONING STATEMENT:\n"</span>)
cat(positioning_statement, <span class="string">"\n"</span>)

<span class="comment"># Save comprehensive report</span>
<span class="function">sink</span>(<span class="string">"STP_Analysis_Report.txt"</span>)
cat(<span class="string">"SUN CARE MARKET: STP STRATEGIC ANALYSIS REPORT\n"</span>)
cat(<span class="function">rep</span>(<span class="string">"="</span>, <span class="number">60</span>), <span class="string">"\n\n"</span>)
cat(<span class="string">"SEGMENT PROFILES\n"</span>)
cat(<span class="function">rep</span>(<span class="string">"-"</span>, <span class="number">20</span>), <span class="string">"\n"</span>)
<span class="function">print</span>(segment_profiles)
cat(<span class="string">"\nPOSITIONING STATEMENT\n"</span>)
cat(<span class="function">rep</span>(<span class="string">"-"</span>, <span class="number">20</span>), <span class="string">"\n"</span>)
cat(positioning_statement, <span class="string">"\n"</span>)
<span class="function">sink</span>()</pre>
                </div>
            </section>
            
            <section class="section" id="business-translation">
                <h2 class="section-title"><span>3</span> Translating Analysis to Business Strategy</h2>
                
                <div class="concept-card">
                    <div class="concept-title">From Statistics to Strategy</div>
                    <p>Technical analysis is meaningless without business translation. Always connect statistical outputs to strategic decisions:</p>
                    <table style="width:100%; margin-top:1rem; border-collapse:collapse;">
                        <tr>
                            <td style="padding:0.75rem; border:1px solid var(--gray-200); background:var(--gray-50);"><strong>Statistical Output</strong></td>
                            <td style="padding:0.75rem; border:1px solid var(--gray-200); background:var(--gray-50);"><strong>Business Translation</strong></td>
                        </tr>
                        <tr>
                            <td style="padding:0.75rem; border:1px solid var(--gray-200);">Segment 1: High income ($68k), 42% subscribe rate</td>
                            <td style="padding:0.75rem; border:1px solid var(--gray-200);">"Premium health-conscious professionals who value convenience and quality. Willing to pay for subscription model."</td>
                        </tr>
                        <tr>
                            <td style="padding:0.75rem; border:1px solid var(--gray-200);">Factor 1: Product Leadership (perform, leader, serious)</td>
                            <td style="padding:0.75rem; border:1px solid var(--gray-200);">"Customers evaluate brands on expertise, trustworthiness, and professional credibility."</td>
                        </tr>
                        <tr>
                            <td style="padding:0.75rem; border:1px solid var(--gray-200);">Empty quadrant: High value + High performance</td>
                            <td style="padding:0.75rem; border:1px solid var(--gray-200);">"Position new product line as 'dermatologist-grade protection at accessible pricing' to capture underserved market."</td>
                        </tr>
                    </table>
                </div>
                
                <div class="concept-card tip">
                    <div class="concept-title">Strategic Validation Checklist</div>
                    <p>Before finalizing your STP strategy, validate with these questions:</p>
                    <ul>
                        <li>‚úì Are segments large enough to be profitable?</li>
                        <li>‚úì Can we reach the target segment through available channels?</li>
                        <li>‚úì Does our positioning differentiate us from key competitors?</li>
                        <li>‚úì Is our positioning credible given our capabilities?</li>
                        <li>‚úì Will this positioning resonate with the target segment's values?</li>
                    </ul>
                </div>
            </section>
            
            <div class="next-steps">
                <a href="positioning.html" class="nav-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"></path>
                    </svg>
                    Back to Module 4
                </a>
                <a href="exercises.html" class="nav-btn next">
                    Next Module: Practical Exercises
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </a>
            </div>
        </main>
    </div>
</body>
</html>